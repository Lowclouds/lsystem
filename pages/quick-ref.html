<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2024-02-07 Wed 20:10 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>L-System Explorer Quick Guide</title>
<meta name="generator" content="Org Mode" />
<style>
  #content { max-width: 60em; margin: auto; }
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #e6e6e6;
    border-radius: 3px;
    background-color: #f2f2f2;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: auto;
  }
  pre.src:before {
    display: none;
    position: absolute;
    top: -8px;
    right: 12px;
    padding: 3px;
    color: #555;
    background-color: #f2f2f299;
  }
  pre.src:hover:before { display: inline; margin-top: 14px;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-authinfo::before { content: 'Authinfo'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
</style>
</head>
<body>
<div id="content" class="content">
<h1 class="title">L-System Explorer Quick Guide</h1>
<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#orgdeee005">1. Modules</a>
<ul>
<li><a href="#orge2eceab">1.1. Turtle Motion</a></li>
<li><a href="#org0c8c2e6">1.2. Turtle Orientation</a></li>
<li><a href="#org3944e0c">1.3. Turtle Settings</a></li>
<li><a href="#org46d6251">1.4. Turtle Geometry</a></li>
<li><a href="#org0e90181">1.5. L-system Geometry and Control</a></li>
</ul>
</li>
<li><a href="#org6f7faf8">2. L-System Syntax</a>
<ul>
<li><a href="#orgcad4d61">2.1. Comments</a></li>
<li><a href="#org83b7a01">2.2. Defines</a></li>
<li><a href="#orgf179b72">2.3. Settings</a></li>
<li><a href="#org9c30a0f">2.4. Variables</a></li>
<li><a href="#org1922295">2.5. Expressions</a></li>
</ul>
</li>
<li><a href="#org3d60cae">3. UI and controls</a>
<ul>
<li><a href="#org0e99d0f">3.1. L-system controls</a></li>
<li><a href="#orgc248b0c">3.2. Turtle controls</a></li>
<li><a href="#org44085b1">3.3. Scene Controls</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-orgdeee005" class="outline-2">
<h2 id="orgdeee005"><span class="section-number-2">1.</span> Modules</h2>
<div class="outline-text-2" id="text-1">
<p class="verse">
Why are they called modules and not commands or something else?<br />
Because module is an old term used by botanists for a unit of growth<br />
("article" in French from the Latin for branch and translated to<br />
module in English.)<br />
<br />
Modules marked <b>u</b> are <b>unimplemented</b><br />
Modules marked <b>p</b> are <b>partially implemented</b><br />
Modules marked <b>c</b> are <b>changed from TABOP/cpfg</b><br />
Modules marked <b>n</b> are <b>new for this implementation</b><br />
</p>
</div>

<div id="outline-container-orge2eceab" class="outline-3">
<h3 id="orge2eceab"><span class="section-number-3">1.1.</span> Turtle Motion</h3>
<div class="outline-text-3" id="text-1-1">
<p>
Without a parameter move 'step' amount, default 1 unit
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<tbody>
<tr>
<td class="org-left">F(d)</td>
<td class="org-left">move d units w/pen down, records track point, creates geometry</td>
</tr>

<tr>
<td class="org-left">f(d)</td>
<td class="org-left">move d units w/pen up, records track point</td>
</tr>

<tr>
<td class="org-left">G(d)</td>
<td class="org-left"><code>==</code> F(d), but does not record track points, creates geometry</td>
</tr>

<tr>
<td class="org-left">g(d)</td>
<td class="org-left"><code>==</code> f(d), w/o recording track points</td>
</tr>

<tr>
<td class="org-left">@[Mm](x,y,z)</td>
<td class="org-left">goto position, 'M' draw, creates geometry, or 'm' don't draw</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-org0c8c2e6" class="outline-3">
<h3 id="org0c8c2e6"><span class="section-number-3">1.2.</span> Turtle Orientation</h3>
<div class="outline-text-3" id="text-1-2">
<p class="verse">
The turtle maintains three unit vectors, heading (<b>H</b>), left (<b>L</b>), and up (<b>U</b>).<br />
The turtle home orientation is <b>H</b> = +x, <b>L</b> = +z, and <b>U</b> = +y,<br />
but L-system Explorer pitches up 90 degrees, initially, so <b>H</b> points +y and <b>L</b> points -x.<br />
<br />
<b>*</b> positive yaw (left) rotates <b>H</b> towards <b>L</b> around <b>U</b>. (x -&gt; z around y)<br />
<b>*</b> positive pitch (down) rotates <b>U</b> towards <b>H</b> around <b>L</b>. (y -&gt; x around z)<br />
<b>*</b> positive roll rotates <b>L</b> towards <b>U</b> around <b>H</b>. (z -&gt; y around x)<br />
<br />
Without a parameter, a turn is 'delta' degrees, default is 90.<br />
<br />
<b>Note</b> We make the turtle behave as if it were in a right-handed system, but all the<br />
underlying Babylonjs is left-handed. This has some odd consequences when comparing<br />
models with TABOP. (If I'd known I could just tell Babylonjs to use a RHS, things<br />
would have been simpler.)<br />
</p>
<p>
<b>Orientation modules</b>
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<tbody>
<tr>
<td class="org-left">+(a)</td>
<td class="org-left">yaw left 'a' degrees    ('a' optional)</td>
</tr>

<tr>
<td class="org-left">-(a)</td>
<td class="org-left">yaw right 'a' degrees   ('a' optional)</td>
</tr>

<tr>
<td class="org-left">&amp;(a)</td>
<td class="org-left">pitch down 'a' degrees  ('a' optional)</td>
</tr>

<tr>
<td class="org-left">^(a)</td>
<td class="org-left">pitch up 'a' degrees    ('a' optional)</td>
</tr>

<tr>
<td class="org-left">\(a)</td>
<td class="org-left">roll left 'a' degrees   ('a' optional)</td>
</tr>

<tr>
<td class="org-left">/(a)</td>
<td class="org-left">roll right 'a' degrees  ('a' optional)</td>
</tr>

<tr>
<td class="org-left">&vert;</td>
<td class="org-left">yaw 180 degrees</td>
</tr>

<tr>
<td class="org-left">@v</td>
<td class="org-left">roll so U is parallel to up [y]</td>
</tr>

<tr>
<td class="org-left">@R(hx,hy,hz[,ux,uy,uz])</td>
<td class="org-left">set heading to [hx,hy,hz]</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">set U parallel to [ux,uy,z], if supplied</td>
</tr>

<tr>
<td class="org-left">@H(h)               <b>n</b></td>
<td class="org-left">set turtle to home position and orientation,</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">if optional h is 0, then set H to +y,</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">otherwise, H is +x. Does not draw or record point</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-org3944e0c" class="outline-3">
<h3 id="org3944e0c"><span class="section-number-3">1.3.</span> Turtle Settings</h3>
<div class="outline-text-3" id="text-1-3">
<p>
Defaults without a parameter to one
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<tbody>
<tr>
<td class="org-left">;(i)</td>
<td class="org-left">increase or set color/material index</td>
</tr>

<tr>
<td class="org-left">,(i)</td>
<td class="org-left">decrease or set color/material index</td>
</tr>

<tr>
<td class="org-left">@;(n)</td>
<td class="org-left">increase or set back face color/material index</td>
</tr>

<tr>
<td class="org-left">@,(n)</td>
<td class="org-left">decrease or set back face color/material index</td>
</tr>

<tr>
<td class="org-left">#(n)</td>
<td class="org-left">increase or set line width</td>
</tr>

<tr>
<td class="org-left">!(n)</td>
<td class="org-left">decrease or set line width</td>
</tr>

<tr>
<td class="org-left">@Tx(n) <b>u</b></td>
<td class="org-left">set texture index</td>
</tr>

<tr>
<td class="org-left">@D(s) <b>u</b></td>
<td class="org-left">set scale factor of subsequent geometry</td>
</tr>

<tr>
<td class="org-left">@Di(f) <b>u</b></td>
<td class="org-left">multiply scale factor by f</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-org46d6251" class="outline-3">
<h3 id="org46d6251"><span class="section-number-3">1.4.</span> Turtle Geometry</h3>
<div class="outline-text-3" id="text-1-4">
<p>
In addition to orientation and color/material, the turtle also maintains a <i>track shape</i>,
which is the shape that it will extrude in moving when the pen is down. The default track
shape is a circle with an initial size of one.
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<tbody>
<tr>
<td class="org-left">@o(d)</td>
<td class="org-left">circle of diameter d, centered at turtle position</td>
</tr>

<tr>
<td class="org-left">@C(d) <b>u</b></td>
<td class="org-left">circle of diameter d in HL plane</td>
</tr>

<tr>
<td class="org-left">@O(d)</td>
<td class="org-left">sphere of diameter d</td>
</tr>

<tr>
<td class="org-left">~(S,s) <b>c</b></td>
<td class="org-left">insert predefined surface S, with optional scale, s</td>
</tr>

<tr>
<td class="org-left">@Cs(n[,t]) <b>n</b></td>
<td class="org-left">start contour with n final pts. n==0 =&gt; use just the control pts</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">t ​=​= 0 =&gt; open contour (default), t =​= 1 =&gt; closed</td>
</tr>

<tr>
<td class="org-left">@Ce(id) <b>n</b></td>
<td class="org-left">end contour and save it as id (number or string)</td>
</tr>

<tr>
<td class="org-left">@Ca([t[,a]]) <b>n</b></td>
<td class="org-left">if t=0 (default), create arc between previous 3 pts</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">if t=1, create arc from previous two points, w/ctr at p0,</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">start at p1, with angle a</td>
</tr>

<tr>
<td class="org-left">@Cc([n[,t]]) <b>n</b></td>
<td class="org-left">create Catmull-Rom spline from previous n points</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">n == 0 (default) will use <b>all</b> prior generated points.</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">t==0 =&gt; open (default) , else closed curve.</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">This will add 1 + m *(n - (t==0) ? 1 : 0) points to the contour,</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">where m = contour points per segment (default = 16)</td>
</tr>

<tr>
<td class="org-left">@Ct(m1,m2) <b>n</b></td>
<td class="org-left">create Hermite spline from previous two points, with optional</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">length multipliers m1 and m2</td>
</tr>

<tr>
<td class="org-left">@Cb    <b>n</b></td>
<td class="org-left">Create a cubic Bezier spline segment from prior four points</td>
</tr>

<tr>
<td class="org-left">@Cm(m) <b>n</b></td>
<td class="org-left">create contour of multiplicity m, default 1, only if closed type</td>
</tr>

<tr>
<td class="org-left">@Cn(n) <b>n</b></td>
<td class="org-left">Set the number of points per segment (default = 16). This is for</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">inserted arcs or  splines; control pts inserted with '.' or f, or g</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">are used as is. Total points is overridden by initial @Cs(n), if n != 0</td>
</tr>

<tr>
<td class="org-left">@#(id)</td>
<td class="org-left">set contour(id) as current track shape. The special id, 'default',</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">sets the default circle as the track shape</td>
</tr>

<tr>
<td class="org-left">{</td>
<td class="org-left">start polygon</td>
</tr>

<tr>
<td class="org-left">{(0)  <b>c</b></td>
<td class="org-left">start path with stepwise control pts, not polygon</td>
</tr>

<tr>
<td class="org-left">{(1)</td>
<td class="org-left">start open path with Hermite spline control pts</td>
</tr>

<tr>
<td class="org-left">{(2) <b>u</b></td>
<td class="org-left">start closed path with Hermite spline control pts</td>
</tr>

<tr>
<td class="org-left">{(3) <b>u</b></td>
<td class="org-left">start open path with B-spline control pts</td>
</tr>

<tr>
<td class="org-left">{(4) <b>u</b></td>
<td class="org-left">start closed path with B-spline control pts</td>
</tr>

<tr>
<td class="org-left">}[(id)] <b>p</b></td>
<td class="org-left">end current polygon/path of any type and extrude contour, With</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">parameter, id, save path as mesh</td>
</tr>

<tr>
<td class="org-left">@Gs</td>
<td class="org-left">start Hermite spline path, same as '{(1).', i.e. saves point</td>
</tr>

<tr>
<td class="org-left">@Ge(n,id) <b>c</b></td>
<td class="org-left">close path started with @Gs. if n, set # intermediate points.</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">If 'id', save extrusion as mesh</td>
</tr>

<tr>
<td class="org-left">.</td>
<td class="org-left">add current position to path, polygon, or contour</td>
</tr>

<tr>
<td class="org-left">@Gt(m1,m2)</td>
<td class="org-left">Set tangent length multipliers - default is 1.2</td>
</tr>

<tr>
<td class="org-left">@Gr(a1,l1,a2,l2)</td>
<td class="org-left">Set slope and length of tangent vectors for radius curve</td>
</tr>

<tr>
<td class="org-left">@Gc(n)       <b>p</b></td>
<td class="org-left">Store control point. Optionally set number of interpolated strips</td>
</tr>
</tbody>
</table>
</div>
</div>


<div id="outline-container-org0e90181" class="outline-3">
<h3 id="org0e90181"><span class="section-number-3">1.5.</span> L-system Geometry and Control</h3>
<div class="outline-text-3" id="text-1-5">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<tbody>
<tr>
<td class="org-left">[</td>
<td class="org-left">start branch, pushing state onto stack</td>
</tr>

<tr>
<td class="org-left">]</td>
<td class="org-left">end branch, popping branch state stack</td>
</tr>

<tr>
<td class="org-left">% <b>p</b></td>
<td class="org-left">cut modules to end of branch</td>
</tr>

<tr>
<td class="org-left">$(id,scale) <b>c</b></td>
<td class="org-left">push current Lsystem and use sub-Lsystem id</td>
</tr>

<tr>
<td class="org-left">$</td>
<td class="org-left">end current sub-Lsystem, return to previous</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>

<div id="outline-container-org6f7faf8" class="outline-2">
<h2 id="org6f7faf8"><span class="section-number-2">2.</span> L-System Syntax</h2>
<div class="outline-text-2" id="text-2">
<p>
Before parsing, the L-system text is run through a JavaScript cpp parser which handles
comments and macro defines. After than, all empty lines and removed and the system is
parsed. See <a href="https://github.com/acgessler/cpp.js/blob/master/Readme.md">cpp.js README</a> for details on how this differs from standard CPP.
</p>
</div>
<div id="outline-container-orgcad4d61" class="outline-3">
<h3 id="orgcad4d61"><span class="section-number-3">2.1.</span> Comments</h3>
<div class="outline-text-3" id="text-2-1">
<p>
C-style comments, '/​* stuff, including newline */​' are supported.<br />
Single-line '//' style comments are not - they conflict with L-system module syntax.
</p>
</div>
</div>
<div id="outline-container-org83b7a01" class="outline-3">
<h3 id="org83b7a01"><span class="section-number-3">2.2.</span> Defines</h3>
<div class="outline-text-3" id="text-2-2">
<p>
   Lines that start with '#define macro value', 'macro' being some word, create
standard C-style macros where 'macro' is replaced with 'value' in 
the L-system before parsing starts. They are not as powerful as cpp.
</p>
</div>
</div>
<div id="outline-container-orgf179b72" class="outline-3">
<h3 id="orgf179b72"><span class="section-number-3">2.3.</span> Settings</h3>
<div class="outline-text-3" id="text-2-3">
<p>
   Before the axiom is specified, settings variables can be set for the L-system. 
The following settings can be used to control default/initial L-system values, 
using standard syntax, i.e. var = value. Multiple settings on the same line must be
separated by a semi-colon.<br />
   Note that the view setting is a JS object with the properties
'position' and 'target', whose values are JS arrays of X,Y,Z coordinates.
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<tbody>
<tr>
<td class="org-left"><b>stemsize</b></td>
<td class="org-left">width of extrusion. default: 0.1</td>
</tr>

<tr>
<td class="org-left"><b>delta</b></td>
<td class="org-left">angle in degrees of yaw, pitch, and roll. default: 90</td>
</tr>

<tr>
<td class="org-left"><b>step</b></td>
<td class="org-left">distance traveled by F,f,G,g modules. default: 1</td>
</tr>

<tr>
<td class="org-left"><b>view</b></td>
<td class="org-left"><b>position:</b> 3D position of viewer/camera.</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left"><b>target:</b> 3D position of view/camera target.</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">e.g. view = {position: [20,20,5], target: [0,8,0]}</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#x2014; or ---</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">auto: direction</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">where direction is one of 'X', '-X', 'Y', '-Y', 'Z', '-Z', or</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">a direction array defining where the camera position should</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">be. The target is always the center of the bounding sphere</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">of the drawn geometry and the distance from the target is</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">about twice the radius of the bounding sphere.</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">e.g. view = {auto: 'y'} will look down on the XY plane. Note,</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">case-insensitivity and quotes. Or,</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">view = {auto: [1,1,1]} will place the camera on a line through</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">the target center parallel to the vector 1,1,1, looking at the</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">target</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">The default view is {auto: 'X'}</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-org9c30a0f" class="outline-3">
<h3 id="org9c30a0f"><span class="section-number-3">2.4.</span> Variables</h3>
<div class="outline-text-3" id="text-2-4">
<p>
   Variables used in the L-system can be set and used in the rules. If you define and 
set a  variable before the lsystem: keyword, it will be global across the main L-system 
and any sub-L-systems. If the variable is set after the lsystem: keyword, it is local
to that L-system. Module parameter variables are local to the rule they are used in.
However, since global and L-system local variables can be used in rule expressions 
along with module parameters, it's best not to have name conflicts.
   For example if you have a parameterized module like, A(t), then defining a global or 
L-system scope variable, t, may cause you grief. LS Explorer uses a dynamic scoping
mechanism where it looks for variables first in rule scope, then L-system scope, and,
finally, global scope.
</p>
</div>
</div>
<div id="outline-container-org1922295" class="outline-3">
<h3 id="org1922295"><span class="section-number-3">2.5.</span> Expressions</h3>
<div class="outline-text-3" id="text-2-5">
<p>
  Expressions occur in tests, parameters, and pre/post test; they follow
mathjs syntax: <a href="https://mathjs.org/docs/expressions/syntax.html">Expression syntax for mathjs</a>.
</p>

<p>
Of particular note, are the logical operators which must be written explicitly as
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<tbody>
<tr>
<td class="org-left">and</td>
<td class="org-left">instead of '&amp;&amp;'</td>
</tr>

<tr>
<td class="org-left">or</td>
<td class="org-left">instead of '&vert;&vert;'</td>
</tr>

<tr>
<td class="org-left">not</td>
<td class="org-left">instead of '!'</td>
</tr>
</tbody>
</table>
<p>
e.g. "(t &gt; 0) and not u", instead of "(t &gt; 0) &amp;&amp; !u"
</p>
</div>
</div>
</div>
<div id="outline-container-org3d60cae" class="outline-2">
<h2 id="org3d60cae"><span class="section-number-2">3.</span> UI and controls</h2>
<div class="outline-text-2" id="text-3">
<ul class="org-ul">
<li>subject to constant change -</li>
</ul>
</div>
<div id="outline-container-org0e99d0f" class="outline-3">
<h3 id="org0e99d0f"><span class="section-number-3">3.1.</span> L-system controls</h3>
<div class="outline-text-3" id="text-3-1">
<p>
Here, you can load an L-system file from disk or enter one manually in the text area.
Below the choose file entry are controls to build, step, parse, rewrite, and draw the L-system.
</p>
<ul class="org-ul">
<li><b>Choose File</b> allows you to load an lsystem locally. It is a text file, typically with a .ls extension</li>
<li><b>Save LS</b> allows you to save the L-system text file.</li>

<li><b>Build</b> will clear geometry, reset the turtle, re-parse, and rewrite the L-system  before drawing.</li>
<li><b>Step</b> will do one iteration step of the the L-system, i.e. one rewrite step and one draw, no matter how
many interations are specified in the L-system spec. As a special case, if the <b>Parse</b> button is used to
reparse and recreate the L-system, <b>Step</b> will initially write and interpret just the axiom; subsequent steps
will clear the previous geometry, rewrite one step of the L-system, and redraw it.</li>
<li><b>Parse</b> this button will parse whatever text is in the L-system source area, re-create the current L-system
and show the result in the L-system Expansion text box. If you make changes to the L-system, choose this first.</li>
<li><b>Rewrite</b> will rewrite the parsed L-system, and, again, place the result in the L-system Expansion box.</li>
<li><b>Draw</b> will interpret the expanded system and draw the geometry on the canvas. Note, that <b>Draw</b> neither
clears, nor resets any previously drawn geometry.</li>
<li><b>Gen Code</b> causes the interpretation to generate the turtle code that it uses to draw the geometry. This 
is simpler in single turtle mode. This should run standalone (with the Turtle3d class) to generate the geometry</li>
<li><b>Save LS file</b> allows you to save the text of the L-system description as a .ls file.</li>
<li><b>Save Model</b> allows you to save drawn geometry to a .babylon or GLTF/GLB file.</li>
<li><b>MultiTurtle?</b> is a checkbox to turn this mode on/off. When on, the interpretation/drawing creates a new
turtle for each branch and then gives each turtle one step on its branch in a round-robin draw mode. When
a turtle reaches the end of the branch it is destroyed. This mode typically appears more natural, however
there are some TABOP nested polygon productions that do not work in this mode, so it's best to turn it off
when using polygon geometry.</li>
</ul>

<p>
Below the L-system source box are status and more controls:
</p>

<ul class="org-ul">
<li><b>L-system status:</b> |X|Y|Z| , where X is the number of iterations/expansions of the axiom; Y is the number
of modules in the L-system expansion, and Z is the number of modules that have been interpreted/drawn. This
last box will turn green when drawing is complete.</li>
<li><b>Draw Speed</b> is an input to control the drawing speed in modules/frame. It defaults to 200 and runs from
1 to 500. Higher rates tend to bog down the browser.</li>

<li><b>Save Code</b> allows you to save that generated code.</li>
</ul>
</div>
</div>
<div id="outline-container-orgc248b0c" class="outline-3">
<h3 id="orgc248b0c"><span class="section-number-3">3.2.</span> Turtle controls</h3>
<div class="outline-text-3" id="text-3-2">
<p>
Below the L-system controls are the turtle controls. To the right of the label, "Turtle Controls" is a widget
that will expand and collapse the controls. The first expansion is a buttonbar that controls the
default turtle. If you open the Javascript console, you can directly enter Turtle3d commands to get 
an idea for how it works. You can also turn on the Gen Code mode to get examples of how the turtle 
is used. 
</p>

<ul class="org-ul">
<li><b>Hide/Show</b> will hide or show the turtle shape, which is a mini axis of the HLU system of the turtle.</li>
<li><b>Home</b> moves the turtle back to 0,0,0 and orients it along the axes.</li>
<li><b>Reset</b> is the same as <b>Clear</b> and <b>Home</b></li>
<li><b>Clear</b> will clear all the geometry generated by the turtle(s).</li>
<li><b>Look at Turtle</b> orients the camera so the turtle is in the center of view, or you can pick the origin, or
the center of the drawn geometry bounding sphere.</li>
<li><b>Show/Hide Color Table</b> displays the current color/material table</li>
</ul>
</div>
</div>
<div id="outline-container-org44085b1" class="outline-3">
<h3 id="org44085b1"><span class="section-number-3">3.3.</span> Scene Controls</h3>
<div class="outline-text-3" id="text-3-3">
<p>
Here you can toggle visibility of the Ground, Sky, and coordinate axes. You can also 'look at'
the turtle, the current origin for the turtle, or the center of the mesh bounding sphere:
helpful if you've lost track of where you are when navigating around.
</p>
<hr />
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="date">Created: 2024-02-07 Wed 20:10</p>
<p class="validation"><a href="https://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
